<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Server Status</title>

  <style>
   input {
  background: #020617;
  color: #e5e7eb;
  border: 1px solid #1e293b;
  border-radius: 6px;
}

button {
  background: #020617;
  color: #e5e7eb;
  border: 1px solid #1e293b;
  border-radius: 6px;
  transition: background 0.15s ease, border 0.15s ease;
}

button:hover {
  background: #020617;
  border-color: #38bdf8;
}

button:active {
  background: #020617;
  border-color: #22c55e;
}

button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

  </style>
</head>
<body>

  <h1>Server Status Check</h1>

  <input id="target" placeholder="example.com or IP address">

  <br>

  <button onclick="checkServer()">Check custom</button>
  <button onclick="checkPreset()">Test 192.160.0.10</button>

  <div id="status"></div>

  <button id="infoBtn" onclick="toggleInfo()" style="display:none;">
    More information
  </button>

  <div id="moreInfo">
    <p>If the server did not respond in time, it may be:</p>
    <ul>
      <li>Powered off or restarting</li>
      <li>Blocking incoming connections</li>
      <li>Not accepting HTTP/HTTPS traffic</li>
      <li>Unavailable from your network</li>
    </ul>
    <p>
      Make sure the server you are trying to reach is turned on and
      connected to the internet.
    </p>
  </div>

  <script>
    function checkPreset() {
      document.getElementById("target").value = "192.160.0.10";
      checkServer();
    }

    async function tryFetch(url, controller) {
      await fetch(url, {
        mode: "no-cors",
        signal: controller.signal
      });
    }

    async function checkServer() {
      const target = document.getElementById("target").value.trim();
      const status = document.getElementById("status");
      const infoBtn = document.getElementById("infoBtn");
      const moreInfo = document.getElementById("moreInfo");

      status.textContent = "Checkingâ€¦";
      status.className = "";
      infoBtn.style.display = "none";
      moreInfo.style.display = "none";

      if (!target) {
        status.textContent = "Please enter a server address.";
        return;
      }

      const controller = new AbortController();
      const timeout = setTimeout(() => controller.abort(), 3000);
      const start = performance.now();

      try {
        // Try HTTPS first
        await tryFetch(`https://${target}/?t=${Math.random()}`, controller);

        const time = Math.round(performance.now() - start);
        clearTimeout(timeout);

        status.textContent = `Servers connected (${time} ms)`;
        status.className = "ok";
        return;

      } catch {}

      try {
        // Fallback to HTTP
        await tryFetch(`http://${target}/?t=${Math.random()}`, controller);

        const time = Math.round(performance.now() - start);
        clearTimeout(timeout);

        status.textContent = `Servers connected (${time} ms)`;
        status.className = "ok";

      } catch {
        status.textContent = "Connection timed out";
        status.className = "bad";
        infoBtn.style.display = "inline-block";
      }
    }

    function toggleInfo() {
      const box = document.getElementById("moreInfo");
      box.style.display =
        box.style.display === "none" ? "block" : "none";
    }
  </script>

</body>
</html>
